!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).SVGInjector={})}(this,function(t){"use strict";var e,r=function(t){return t.cloneNode(!0)},n=function(){return"file:"===window.location.protocol},i=new Map,o={},a=function(t,e){o[t]=o[t]||[],o[t].push(e)},l=function(t){for(var e=function(e,n){setTimeout(function(){if(Array.isArray(o[t])){var n=i.get(t),a=o[t][e];(n instanceof SVGSVGElement||n instanceof HTMLElement)&&a(null,r(n)),n instanceof Error&&a(n),e===o[t].length-1&&delete o[t]}},0)},n=0,a=o[t].length;n<a;n++)e(n)},s=0,c=[],u={},f="http://www.w3.org/1999/xlink",p=function(t,e,o){var p=o.evalScripts,d=o.renumerateIRIElements,v=t.getAttribute("data-src")||t.getAttribute("src");if(v&&/\.svg/i.test(v)){if(-1!==c.indexOf(t))return c.splice(c.indexOf(t),1),void(t=null);c.push(t),t.setAttribute("src",""),function(t,e){if(i.has(t)){var o=i.get(t);return o instanceof SVGSVGElement||o instanceof HTMLElement?void e(null,r(o)):o instanceof Error?void e(o):void a(t,e)}i.set(t,void 0),a(t,e);var s=new XMLHttpRequest;s.onreadystatechange=function(){try{if(4===s.readyState){if(404===s.status||null===s.responseXML)throw new Error(n()?"Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver.":"Unable to load SVG file: "+t);if(!(200===s.status||n()&&0===s.status))throw new Error("There was a problem injecting the SVG: "+s.status+" "+s.statusText);s.responseXML instanceof Document&&s.responseXML.documentElement&&i.set(t,s.responseXML.documentElement),l(t)}}catch(e){i.set(t,e),l(t)}},s.open("GET",t),s.overrideMimeType&&s.overrideMimeType("text/xml"),s.send()}(v,function(r,n){if(!n)return c.splice(c.indexOf(t),1),t=null,void e(r);var i=t.getAttribute("id");i&&n.setAttribute("id",i);var o=t.getAttribute("title");o&&n.setAttribute("title",o);var a=t.getAttribute("width");a&&n.setAttribute("width",a);var l=t.getAttribute("height");l&&n.setAttribute("height",l);var h=Array.from(new Set((n.getAttribute("class")||"").split(" ").concat(["injected-svg"],(t.getAttribute("class")||"").split(" ")))).join(" ").trim();n.setAttribute("class",h);var m=t.getAttribute("style");m&&n.setAttribute("style",m),n.setAttribute("data-src",v);var g=[].filter.call(t.attributes,function(t){return/^data-\w[\w-]*$/.test(t.name)});if(Array.prototype.forEach.call(g,function(t){t.name&&t.value&&n.setAttribute(t.name,t.value)}),d){var A,w,b,y,S={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],path:[],pattern:["fill","stroke"],radialGradient:["fill","stroke"]};Object.keys(S).forEach(function(t){w=S[t];for(var e=function(t,e){var r;y=(b=A[t].id)+"-"+ ++s,Array.prototype.forEach.call(w,function(t){for(var e=0,i=(r=n.querySelectorAll("["+t+'*="'+b+'"]')).length;e<i;e++){var o=r[e].getAttribute(t);o&&!o.match(new RegExp("url\\(#"+b+"\\)"))||r[e].setAttribute(t,"url(#"+y+")")}});for(var i=n.querySelectorAll("[*|href]"),o=[],a=0,l=i.length;a<l;a++){var c=i[a].getAttributeNS(f,"href");c&&c.toString()==="#"+A[t].id&&o.push(i[a])}for(var u=0,p=o.length;u<p;u++)o[u].setAttributeNS(f,"href","#"+y);A[t].id=y},r=0,i=(A=n.querySelectorAll(t+"[id]")).length;r<i;r++)e(r)})}n.removeAttribute("xmlns:a");for(var E,x,j=n.querySelectorAll("script"),k=[],G=0,M=j.length;G<M;G++)(x=j[G].getAttribute("type"))&&"application/ecmascript"!==x&&"application/javascript"!==x&&"text/javascript"!==x||((E=j[G].innerText||j[G].textContent)&&k.push(E),n.removeChild(j[G]));if(k.length>0&&("always"===p||"once"===p&&!u[v])){for(var I=0,T=k.length;I<T;I++)new Function(k[I])(window);u[v]=!0}var V=n.querySelectorAll("style");Array.prototype.forEach.call(V,function(t){t.textContent+=""}),n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("xmlns:xlink",f),t.parentNode&&t.parentNode.replaceChild(n,t),c.splice(c.indexOf(t),1),t=null,e(null,n)})}else e(new Error("Attempted to inject a file with a non-svg extension: "+v))};(e=t.EvalScripts||(t.EvalScripts={})).Always="always",e.Once="once",e.Never="never";t.SVGInjector=function(e,r){var n=void 0===r?{}:r,i=n.done,o=void 0===i?function(){}:i,a=n.each,l=void 0===a?function(){}:a,s=n.evalScripts,c=void 0===s?t.EvalScripts.Never:s,u=n.renumerateIRIElements,f=void 0===u||u;if(e&&"length"in e)for(var d=0,v=0,h=e.length;v<h;v++)p(e[v],function(t,r){l(t,r),e&&"length"in e&&e.length===++d&&o(d)},{evalScripts:c,renumerateIRIElements:f});else e?p(e,function(t,r){l(t,r),o(1),e=null},{evalScripts:c,renumerateIRIElements:f}):o(0)},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=svg-injector.umd.production.js.map

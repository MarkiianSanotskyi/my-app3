"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var cloneSvg=function(e){return e.cloneNode(!0)},isLocal=function(){return"file:"===window.location.protocol},svgCache=new Map,requestQueue={},queueRequest=function(e,t){requestQueue[e]=requestQueue[e]||[],requestQueue[e].push(t)},processRequestQueue=function(e){for(var t=function(t,r){setTimeout(function(){if(Array.isArray(requestQueue[e])){var r=svgCache.get(e),n=requestQueue[e][t];(r instanceof SVGSVGElement||r instanceof HTMLElement)&&n(null,cloneSvg(r)),r instanceof Error&&n(r),t===requestQueue[e].length-1&&delete requestQueue[e]}},0)},r=0,n=requestQueue[e].length;r<n;r++)t(r)},loadSvg=function(e,t){if(svgCache.has(e)){var r=svgCache.get(e);return r instanceof SVGSVGElement||r instanceof HTMLElement?void t(null,cloneSvg(r)):r instanceof Error?void t(r):void queueRequest(e,t)}svgCache.set(e,void 0),queueRequest(e,t);var n=new XMLHttpRequest;n.onreadystatechange=function(){try{if(4===n.readyState){if(404===n.status||null===n.responseXML)throw new Error(isLocal()?"Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver.":"Unable to load SVG file: "+e);if(!(200===n.status||isLocal()&&0===n.status))throw new Error("There was a problem injecting the SVG: "+n.status+" "+n.statusText);n.responseXML instanceof Document&&n.responseXML.documentElement&&svgCache.set(e,n.responseXML.documentElement),processRequestQueue(e)}}catch(t){svgCache.set(e,t),processRequestQueue(e)}},n.open("GET",e),n.overrideMimeType&&n.overrideMimeType("text/xml"),n.send()},idCounter=0,uniqueId=function(){return++idCounter},injectedElements=[],ranScripts={},svgNamespace="http://www.w3.org/2000/svg",xlinkNamespace="http://www.w3.org/1999/xlink",injectElement=function(e,t,r){var n=r.evalScripts,i=r.renumerateIRIElements,s=e.getAttribute("data-src")||e.getAttribute("src");if(s&&/\.svg/i.test(s)){if(-1!==injectedElements.indexOf(e))return injectedElements.splice(injectedElements.indexOf(e),1),void(e=null);injectedElements.push(e),e.setAttribute("src",""),loadSvg(s,function(r,a){if(!a)return injectedElements.splice(injectedElements.indexOf(e),1),e=null,void t(r);var l=e.getAttribute("id");l&&a.setAttribute("id",l);var o=e.getAttribute("title");o&&a.setAttribute("title",o);var u=e.getAttribute("width");u&&a.setAttribute("width",u);var c=e.getAttribute("height");c&&a.setAttribute("height",c);var v=Array.from(new Set((a.getAttribute("class")||"").split(" ").concat(["injected-svg"],(e.getAttribute("class")||"").split(" ")))).join(" ").trim();a.setAttribute("class",v);var p=e.getAttribute("style");p&&a.setAttribute("style",p),a.setAttribute("data-src",s);var f=[].filter.call(e.attributes,function(e){return/^data-\w[\w-]*$/.test(e.name)});if(Array.prototype.forEach.call(f,function(e){e.name&&e.value&&a.setAttribute(e.name,e.value)}),i){var d,m,g,h,A={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],path:[],pattern:["fill","stroke"],radialGradient:["fill","stroke"]};Object.keys(A).forEach(function(e){m=A[e];for(var t=function(e,t){var r;h=(g=d[e].id)+"-"+uniqueId(),Array.prototype.forEach.call(m,function(e){for(var t=0,n=(r=a.querySelectorAll("["+e+'*="'+g+'"]')).length;t<n;t++){var i=r[t].getAttribute(e);i&&!i.match(new RegExp("url\\(#"+g+"\\)"))||r[t].setAttribute(e,"url(#"+h+")")}});for(var n=a.querySelectorAll("[*|href]"),i=[],s=0,l=n.length;s<l;s++){var o=n[s].getAttributeNS(xlinkNamespace,"href");o&&o.toString()==="#"+d[e].id&&i.push(n[s])}for(var u=0,c=i.length;u<c;u++)i[u].setAttributeNS(xlinkNamespace,"href","#"+h);d[e].id=h},r=0,n=(d=a.querySelectorAll(e+"[id]")).length;r<n;r++)t(r)})}a.removeAttribute("xmlns:a");for(var E,w,S=a.querySelectorAll("script"),b=[],y=0,x=S.length;y<x;y++)(w=S[y].getAttribute("type"))&&"application/ecmascript"!==w&&"application/javascript"!==w&&"text/javascript"!==w||((E=S[y].innerText||S[y].textContent)&&b.push(E),a.removeChild(S[y]));if(b.length>0&&("always"===n||"once"===n&&!ranScripts[s])){for(var j=0,q=b.length;j<q;j++)new Function(b[j])(window);ranScripts[s]=!0}var k=a.querySelectorAll("style");Array.prototype.forEach.call(k,function(e){e.textContent+=""}),a.setAttribute("xmlns",svgNamespace),a.setAttribute("xmlns:xlink",xlinkNamespace),e.parentNode&&e.parentNode.replaceChild(a,e),injectedElements.splice(injectedElements.indexOf(e),1),e=null,t(null,a)})}else t(new Error("Attempted to inject a file with a non-svg extension: "+s))};!function(e){e.Always="always",e.Once="once",e.Never="never"}(exports.EvalScripts||(exports.EvalScripts={}));var SVGInjector=function(e,t){var r=void 0===t?{}:t,n=r.done,i=void 0===n?function(){}:n,s=r.each,a=void 0===s?function(){}:s,l=r.evalScripts,o=void 0===l?exports.EvalScripts.Never:l,u=r.renumerateIRIElements,c=void 0===u||u;if(e&&"length"in e)for(var v=0,p=0,f=e.length;p<f;p++)injectElement(e[p],function(t,r){a(t,r),e&&"length"in e&&e.length===++v&&i(v)},{evalScripts:o,renumerateIRIElements:c});else e?injectElement(e,function(t,r){a(t,r),i(1),e=null},{evalScripts:o,renumerateIRIElements:c}):i(0)};exports.SVGInjector=SVGInjector;
//# sourceMappingURL=svg-injector.cjs.production.js.map
